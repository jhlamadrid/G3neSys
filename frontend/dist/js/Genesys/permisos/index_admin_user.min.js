function get_areas(){
  var option = $("#oficina").val();
  $.ajax({
    type : 'POST',
    url : servidor + "permisos/get_areas?ajax=true",
    data : ({
      oficina : option
    }),
    dataType : 'text',
    cache : false,
    success : function(data){
      var respuesta = JSON.parse(data);
      if(respuesta.result) {
        var  tam = respuesta.areas.length;
        $("#areas").empty();
        $("#areas").append('<option value="-1">SELECCIONE UNA AREA</option>');
        for (var i = 0; i < tam; i++) {
          $("#areas").append('<option value="'+respuesta.areas[i]['OFIAGECOD']+'">'+respuesta.areas[i]['OFIAGEDES']+'</option>')
        }
      } else {
        $("#areas").empty();
        swal({'title':'','text':respuesta.mensaje})
      }
    }, error : function(jqXHR, textStatus, errorThrown){

    }
  })
}
$("#fechaInicio").focus(function(){
  $("#fechaInicio").datepicker({ language: 'es', startDate : '0d', autoclose: true}).datepicker("show");
  $("#fechaFin").attr("disabled",false);
  $("#fechaFin").datepicker("destroy");
  $("#fechaFin").val("");
})

$("#fechaFin").focus(function(){
  if ($("#fechaInicio").val()) {
    var fechaActual = getFechaActual();
    var fecha2 = $("#fechaInicio").val();
    var dias = restaFechas(getFechaActual(),$("#fechaInicio").val());
    var dias = parseInt(dias) + 1;
    $("#fechaFin").datepicker({language: 'es', startDate : '+'+dias+'d', autoclose: true}).datepicker("show");
  }
})

function getFechaActual(){ var hoy = new Date(); var dd = hoy.getDate(); var mm = hoy.getMonth()+1;  var yyyy = hoy.getFullYear(); if(dd<10) dd='0'+dd; if(mm<10) mm='0'+mm; return dd+'/'+mm+'/'+yyyy; }

restaFechas = function(f1,f2) { var aFecha1 = f1.split('/'); var aFecha2 = f2.split('/'); var fFecha1 = Date.UTC(aFecha1[2],aFecha1[1]-1,aFecha1[0]); var fFecha2 = Date.UTC(aFecha2[2],aFecha2[1]-1,aFecha2[0]); var dif = fFecha2 - fFecha1; var dias = Math.floor(dif / (1000 * 60 * 60 * 24)); return dias;}
function buscar_usuario(){ $("#BuquedaUsuarios").modal('show'); }
